<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Love Page</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:sans-serif}
body{background:#000;overflow:hidden}

/* CENTER */
.home-page{
    height:100vh;
    display:grid;
    place-items:center;
    z-index:3;
    position:relative;
}

.content{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:28px;
    text-align:center;
}

.together{
    color:#fff;
    font-size:20px;
    font-weight:bold;
    text-shadow:0 0 10px #fff;
}

/* PLAYER */
.music-player{
    width:360px;
    padding:18px;
    border-radius:26px;
    background:rgba(255,255,255,.15);
    backdrop-filter:blur(22px);
    box-shadow:0 12px 40px rgba(0,0,0,.45);
}

.player-top{
    display:flex;
    gap:14px;
    margin-bottom:14px;
}

.album-frame{
    width:64px;
    height:64px;
    border-radius:14px;
    overflow:hidden;
}

.album-frame img{
    width:100%;
    height:100%;
    object-fit:cover;
}

.song-title{color:#fff;font-weight:600}
.song-artist{color:rgba(255,255,255,.7);font-size:13px}

.player-controls{
    display:flex;
    justify-content:center;
    gap:18px;
}

.music-btn{
    width:46px;
    height:46px;
    border-radius:50%;
    border:none;
    background:rgba(255,255,255,.3);
    color:#fff;
    font-size:18px;
    cursor:pointer;
}

.seek{width:100%;margin-top:12px}

/* BACKGROUND */
.blob{
    position:fixed;
    inset:0;
    filter:blur(120px);
    background:conic-gradient(
        #ff69b4,#ffb6c1,#da70d6,
        #ff1493,#ff7f50,#ffb6c1,#ff69b4
    );
    animation:spin 8s linear infinite;
    z-index:0;
}

@keyframes spin{
    from{transform:rotate(0) scale(2)}
    to{transform:rotate(360deg) scale(2)}
}

/* SLIDES */
@keyframes fadeInOut{
    0%{opacity:0;transform:scale(.92);filter:blur(10px)}
    20%{opacity:1;transform:scale(1);filter:blur(0)}
    90%{opacity:1}
    100%{opacity:0;filter:blur(8px)}
}

.slide{
    position:fixed;
    width:240px;      /* ENLARGED */
    border-radius:22px;
    animation:fadeInOut 5s ease-in-out forwards;
    box-shadow:
        0 12px 28px rgba(0,0,0,.6),
        0 0 18px rgba(255,182,193,.5);
    pointer-events:none;
    z-index:2;
}
</style>
</head>

<body>

<div class="blob"></div>

<div class="home-page">
<div class="content">

<div class="together">
  No matter where life takes us, I will always choose you.<br>
  Loving you for <span id="time"></span>
</div>


<div class="music-player">
    <div class="player-top">
        <div class="album-frame"><img src="./images/cas.png"></div>
        <div>
            <div class="song-title">Nothing's Gonna Hurt You Baby</div>
            <div class="song-artist">Cigarettes After Sex</div>
        </div>
    </div>

    <div class="player-controls">
        <button class="music-btn" id="playBtn">▶</button>
        <button class="music-btn" id="replayBtn">⟲</button>
    </div>

    <input type="range" id="seek" class="seek">
    <audio id="audio" src="./images/cas music.mp3"></audio>
</div>

</div>
</div>

<script>
/* TIME */
const startDate = new Date(2024, 3, 27, 0, 0, 0);

setInterval(() => {
    const now = new Date();

    let months =
        (now.getFullYear() - startDate.getFullYear()) * 12 +
        (now.getMonth() - startDate.getMonth());

    let anchor = new Date(startDate);
    anchor.setMonth(startDate.getMonth() + months);

    if (now < anchor) {
        months--;
        anchor.setMonth(anchor.getMonth() - 1);
    }

    let diff = now - anchor;

    const days = Math.floor(diff / 86400000);
    diff %= 86400000;

    const h = Math.floor(diff / 3600000);
    diff %= 3600000;

    const m = Math.floor(diff / 60000);
    diff %= 60000;

    const s = Math.floor(diff / 1000);

    time.textContent = `${months} months ${days} days ${h}h ${m}m ${s}s`;
}, 1000);


/* MUSIC */
const audio=audioEl=document.getElementById("audio");
const playBtn=document.getElementById("playBtn");
const replayBtn=document.getElementById("replayBtn");
const seek=document.getElementById("seek");

playBtn.onclick=()=>{
    if(audio.paused){
        audio.play();
        playBtn.textContent="⏸";
        startShow();
    }else{
        audio.pause();
        playBtn.textContent="▶";
        stopShow();
    }
};

replayBtn.onclick=()=>{
    audio.currentTime=0;
    audio.play();
    playBtn.textContent="⏸";
    resetShow();
};

audio.ontimeupdate=()=>{
    seek.max=audio.duration||0;
    seek.value=audio.currentTime;
};
seek.oninput=()=>audio.currentTime=seek.value;

/* SLIDESHOW SYNC */
const images = [
  "./images/pic1.jpg",
  "./images/pic2.jpg",
  "./images/pic3.jpg",
  "./images/pic4.jpg",
  "./images/pic5.jpg",
  "./images/pic6.jpg",
  "./images/pic7.jpg",
  "./images/pic8.jpg",
  "./images/pic9.jpg",
  "./images/pic11.jpg",
  "./images/pic12.jpg",
  "./images/pic13.jpg"
];


const SONG_DURATION=41000; // 41s exact
let timer=null,index=0;

const size=240,gap=10;
const cols=Math.floor(window.innerWidth/(size+gap));
const rows=Math.floor(window.innerHeight/(size+gap));
const totalCells=cols*rows;
const interval=SONG_DURATION/totalCells;

function showImage(){
    if(index>=totalCells) return;

    const img=document.createElement("img");
    img.src=images[index%images.length];
    img.className="slide";

    const x=index%cols;
    const y=Math.floor(index/cols);

    img.style.left=(x*(size+gap))+"px";
    img.style.top=(y*(size+gap))+"px";

    document.body.appendChild(img);
    setTimeout(()=>img.remove(),5000);
    index++;
}

function startShow(){
    if(timer) return;
    timer=setInterval(showImage,interval);
}

function stopShow(){
    clearInterval(timer);
    timer=null;
}

function resetShow(){
    stopShow();
    document.querySelectorAll(".slide").forEach(e=>e.remove());
    index=0;
    startShow();
}
</script>

</body>
</html>
